<head>
    <link rel="stylesheet" href="https://bootswatch.com/5/cosmo/bootstrap.min.css">
    <link rel="stylesheet" href="../styles/mystyles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <script type=module src="../header.js"></script>

</head>

<body>
    <main-header></main-header>
    <div class="section-container">
        <h1>Gesti√≥n de inventario</h1>
    </div>

    <div>
        <!doctype html>
        <title>Upload new File</title>
        <h1>Upload new File</h1>
        <form method=post enctype=multipart/form-data>
            <input type=file name=file>
            <button onclick="Upload()">Suir archivo</button>
        </form>
    </div>

    <div id="myData"></div>

</body>

<script>

    function Upload() {
        const formData = new FormData();
        const fileField = document.querySelector('input[type="file"]');
        formData.append('file', fileField.files[0]);
        fetch('http://127.0.0.1:5000/documento', {
            method: 'POST',
            body: formData
        })
            .then(response =>
                response.json().then(
                    data => {
                        var mainContainer = document.getElementById("myData");
                        console.log(data);

                        var temp = "";
                        data.forEach((itemData) => {
                            var div = document.createElement("div");
                            div.innerHTML = 'tortura de: ' + itemData.cock + ' ' + itemData.balls;
                            mainContainer.appendChild(div);
                        });
                    }
                )
            )
            .then(jsonResponse => {
                console.log('Success:', jsonResponse);
            })
            .catch(error => {
                console.error('Error:', error);
            })
    }
</script>